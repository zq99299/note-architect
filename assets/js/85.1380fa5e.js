(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{597:function(t,s,a){t.exports=a.p+"assets/img/image-20210302225306233.ec877587.png"},776:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"解决-cookie-异常-测试订单支付流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决-cookie-异常-测试订单支付流程"}},[t._v("#")]),t._v(" 解决 Cookie 异常，测试订单支付流程")]),t._v(" "),n("p",[t._v("使用域名的话，设置 cookie 的时候也会导致一个异常")]),t._v(" "),n("p",[n("img",{attrs:{src:a(597),alt:"image-20210302225306233"}})]),t._v(" "),n("p",[t._v("这一块原因笔者听得不是很明白，大概意思是 tomcat8.5 以后会导致这个异常，解决方法是使用自定义的这个 cookie 处理器")]),t._v(" "),n("p",[t._v("编辑配置 "),n("code",[t._v("vim /usr/local/tomcat-api/conf/context.xml")]),t._v(" 增加如下标签")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在 Context 标签下增加下面的标签 --\x3e")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("CookieProcessor")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.tomcat.util.http.LegacyCookieProcessor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);